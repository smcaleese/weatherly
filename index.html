<!DOCTYPE html>
<html>
<head>
	<title>UI</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="index.css" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
</head>
<body>
    <section class="top">
        <nav class="navbar">
            <form class="search-bar">
                <input />
                <button>
                    <img src="images/search-icon.png" alt="search image" />
                </button>
            </form>
        </nav>
        <div class="weather-today-box center">
            <h1>Dublin, Ireland</h1>
            <h3 id="current-day"></h3>
            <div class="weather-today-info-box">
                <div class="info-box center">
                    <h2 id="current-temperature"></h2>
                    <img id="current-weather-icon" src="" alt="" />
                </div>
                <div class="info-box center">
                    <h2>wind</h2>
                    <p id="current-wind"></p>
                </div>
                <div class="info-box center">
                    <h2>humidity</h2>
                    <p id="current-humidity"></p>
                </div>
                <div class="info-box center">
                    <h2>precipitation</h2>
                    <p id="current-precipitation"></p>
                </div>
            </div>
        </div>
    </section>
    <section class="bottom center">
        <div class="weather-week-box" id="weather-week-box"></div>
    </section>

    <script>
        const weatherInfo = {
            Monday: {
                weather: "sunny",
                temperature: 12,
                wind: 15,
                humidity: 55,
                precipitation: 32
            },
            Tuesday: {
                weather: "rainy",
                temperature: 5,
                wind: 15,
                humidity: 50,
                precipitation: 13
            },
            Wednesday: {
                weather: "sunny",
                temperature: 10,
                wind: 1,
                humidity: 55,
                precipitation: 22
            },
            Thursday: {
                weather: "cloudy",
                temperature: 6,
                wind: 3,
                humidity: 90,
                precipitation: 33
            },
            Friday: {
                weather: "cloudy",
                temperature: 15,
                wind: 17,
                humidity: 50,
                precipitation: 76
            },
            Saturday: {
                weather: "rainy",
                temperature: 11,
                wind: 4,
                humidity: 82,
                precipitation: 25
            },
            Sunday: {
                weather: "cloudy",
                temperature: 8,
                wind: 2,
                humidity: 85,
                precipitation: 93
            },
        };

        const weatherIconsMap = {
            sunny: "sun-icon.png",
            rainy: "rain-icon.png",
            cloudy: "clouds-icon.png"
        };
        const backgroundMap = {
            sunny: "sunny-background.jpg",
            rainy: "rainy-background.jpg",
            cloudy: "cloudy-background.jpg"
        };
        const weekList = document.getElementById("weather-week-box");

        function setThisWeeksWeather() {
            let i = 1;
            for(const day in weatherInfo) {
                console.log(weatherInfo[day].weather);
                let newDiv = document.createElement("div");
                newDiv.id = `week-box-${i}`;
                newDiv.classList.add("week-box");
                newDiv.classList.add("center");
                newDiv.innerHTML = "";
                newDiv.innerHTML += `<h3>${day}</h3>`;
                newDiv.innerHTML += `<img src=images/${weatherIconsMap[weatherInfo[day].weather]} alt=${weatherInfo[day].weather} />`
                newDiv.innerHTML += `<h3>${weatherInfo[day].temperature}°C</h3>`;
                weekList.appendChild(newDiv);
                const childNodes = document.getElementById(newDiv.id).childNodes;
                // only allow the parent element to be clicked
                for(let i = 0; i < childNodes.length; i++) {
                    childNodes[i].style.pointerEvents = "none";
                }
                i++;
            }
        }
        function setTodaysWeather(day) {
            document.body.style.backgroundImage = `url(images/${backgroundMap[weatherInfo[day].weather]})`;
            document.getElementById("current-day").innerHTML = day;

            document.getElementById("current-weather-icon").src = "images/" + weatherIconsMap[weatherInfo[day].weather];
            document.getElementById("current-weather-icon").alt = weatherInfo[day].weather + " weather icon";

            document.getElementById("current-temperature").innerHTML = weatherInfo[day].temperature + "°C";
            document.getElementById("current-wind").innerHTML = weatherInfo[day].wind + " km/h";
            document.getElementById("current-humidity").innerHTML = weatherInfo[day].humidity + "%";
            document.getElementById("current-precipitation").innerHTML = weatherInfo[day].precipitation + "% chance";
        }

        window.onload = function() {
            setThisWeeksWeather();
            const todaysIndex = new Date().getDay();
            const today = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'][todaysIndex];
            setTodaysWeather(today);
        }

        document.getElementById("weather-week-box").onclick = function(event) {
            const id = event.target.id;
            const index = parseInt(id.charAt(id.length - 1)) - 1;
            const day = Object.keys(weatherInfo)[index];
            setTodaysWeather(day);
        }
    </script>
</body>
</html>